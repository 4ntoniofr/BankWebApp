-- MySQL Script generated by MySQL Workbench
-- Mon 24 Apr 2023 11:26:06 AM CEST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema grupo25
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `grupo25` ;

-- -----------------------------------------------------
-- Schema grupo25
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `grupo25` DEFAULT CHARACTER SET utf8 ;
USE `grupo25` ;

-- -----------------------------------------------------
-- Table `grupo25`.`ESTADO_CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`ESTADO_CLIENTE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ESTADO` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `estado_UNIQUE` ON `grupo25`.`ESTADO_CLIENTE` (`ESTADO` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`DIRECCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`DIRECCION` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `CALLE` VARCHAR(100) NOT NULL,
  `NUMERO` INT NOT NULL,
  `CIUDAD` VARCHAR(45) NOT NULL,
  `CODIGO_POSTAL` VARCHAR(5) NOT NULL,
  `PAIS` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `grupo25`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`USUARIO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `USUARIO` VARCHAR(45) NOT NULL,
  `PASSWORD` VARCHAR(45) NOT NULL,
  `FECHA_REGISTRO` DATE NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `USUARIO_UNIQUE` ON `grupo25`.`USUARIO` (`USUARIO` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`PERSONA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`PERSONA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `DNI` VARCHAR(9) NOT NULL,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `PRIMER_APELLIDO` VARCHAR(45) NOT NULL,
  `SEGUNDO_APELLIDO` VARCHAR(45) NULL,
  `FECHA_NACIMIENTO` DATE NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `DNI_UNIQUE` ON `grupo25`.`PERSONA` (`DNI` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`ROL_CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`ROL_CLIENTE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ROL` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `ROL_UNIQUE` ON `grupo25`.`ROL_CLIENTE` (`ROL` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`ROL_EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`ROL_EMPLEADO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ROL` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `ROL_UNIQUE` ON `grupo25`.`ROL_EMPLEADO` (`ROL` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`EMPLEADO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `USUARIO_ID` INT NOT NULL,
  `PERSONA_ID` INT NOT NULL,
  `ROL_EMPLEADO_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_EMPLEADO_USUARIO1`
    FOREIGN KEY (`USUARIO_ID`)
    REFERENCES `grupo25`.`USUARIO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EMPLEADO_PERSONA1`
    FOREIGN KEY (`PERSONA_ID`)
    REFERENCES `grupo25`.`PERSONA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EMPLEADO_ROL_EMPLEADO1`
    FOREIGN KEY (`ROL_EMPLEADO_ID`)
    REFERENCES `grupo25`.`ROL_EMPLEADO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_EMPLEADO_USUARIO1_idx` ON `grupo25`.`EMPLEADO` (`USUARIO_ID` ASC) VISIBLE;

CREATE INDEX `fk_EMPLEADO_PERSONA1_idx` ON `grupo25`.`EMPLEADO` (`PERSONA_ID` ASC) VISIBLE;

CREATE INDEX `fk_EMPLEADO_ROL_EMPLEADO1_idx` ON `grupo25`.`EMPLEADO` (`ROL_EMPLEADO_ID` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`EMPRESA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`EMPRESA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(100) NOT NULL,
  `FECHA_CIERRE` DATE NULL,
  `CLIENTE_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_EMPRESA_CLIENTE1`
    FOREIGN KEY (`CLIENTE_ID`)
    REFERENCES `grupo25`.`CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_EMPRESA_CLIENTE1_idx` ON `grupo25`.`EMPRESA` (`CLIENTE_ID` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`CLIENTE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ESTADO_CLIENTE` INT NOT NULL,
  `DIRECCION` INT NOT NULL,
  `FECHA_INICIO` DATE NOT NULL,
  `USUARIO_ID` INT NOT NULL,
  `PERSONA_ID` INT NULL,
  `ROL_CLIENTE_ID` INT NOT NULL,
  `AUTORIZADOR` INT NULL,
  `EMPRESA_SOCIO` INT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_Cliente_EstadoCliente1`
    FOREIGN KEY (`ESTADO_CLIENTE`)
    REFERENCES `grupo25`.`ESTADO_CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Cliente_Direccion1`
    FOREIGN KEY (`DIRECCION`)
    REFERENCES `grupo25`.`DIRECCION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CLIENTE_USUARIO1`
    FOREIGN KEY (`USUARIO_ID`)
    REFERENCES `grupo25`.`USUARIO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CLIENTE_PERSONA1`
    FOREIGN KEY (`PERSONA_ID`)
    REFERENCES `grupo25`.`PERSONA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CLIENTE_ROL_CLIENTE1`
    FOREIGN KEY (`ROL_CLIENTE_ID`)
    REFERENCES `grupo25`.`ROL_CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CLIENTE_EMPLEADO1`
    FOREIGN KEY (`AUTORIZADOR`)
    REFERENCES `grupo25`.`EMPLEADO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CLIENTE_EMPRESA1`
    FOREIGN KEY (`EMPRESA_SOCIO`)
    REFERENCES `grupo25`.`EMPRESA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Cliente_EstadoCliente1_idx` ON `grupo25`.`CLIENTE` (`ESTADO_CLIENTE` ASC) VISIBLE;

CREATE INDEX `fk_Cliente_Direccion1_idx` ON `grupo25`.`CLIENTE` (`DIRECCION` ASC) VISIBLE;

CREATE INDEX `fk_CLIENTE_USUARIO1_idx` ON `grupo25`.`CLIENTE` (`USUARIO_ID` ASC) VISIBLE;

CREATE INDEX `fk_CLIENTE_PERSONA1_idx` ON `grupo25`.`CLIENTE` (`PERSONA_ID` ASC) VISIBLE;

CREATE INDEX `fk_CLIENTE_ROL_CLIENTE1_idx` ON `grupo25`.`CLIENTE` (`ROL_CLIENTE_ID` ASC) VISIBLE;

CREATE INDEX `fk_CLIENTE_EMPLEADO1_idx` ON `grupo25`.`CLIENTE` (`AUTORIZADOR` ASC) VISIBLE;

CREATE INDEX `fk_CLIENTE_EMPRESA1_idx` ON `grupo25`.`CLIENTE` (`EMPRESA_SOCIO` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`ESTADO_CUENTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`ESTADO_CUENTA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ESTADO` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `grupo25`.`CUENTA_BANCARIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`CUENTA_BANCARIA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `IBAN` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `iban_UNIQUE` ON `grupo25`.`CUENTA_BANCARIA` (`IBAN` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`MONEDA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`MONEDA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `MONEDA` VARCHAR(45) NOT NULL,
  `CAMBIO_EURO` DOUBLE NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `MONEDA_UNIQUE` ON `grupo25`.`MONEDA` (`MONEDA` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`CUENTA_INTERNA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`CUENTA_INTERNA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `CUENTA_BANCARIA` INT NOT NULL,
  `PROPIETARIO` INT NOT NULL,
  `PAIS` VARCHAR(45) NOT NULL,
  `CANTIDAD` DOUBLE NOT NULL,
  `ESTADO_CUENTA` INT NOT NULL,
  `MONEDA` INT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_CuentaBanco_Cliente1`
    FOREIGN KEY (`PROPIETARIO`)
    REFERENCES `grupo25`.`CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CuentaBanco_EstadoCuenta1`
    FOREIGN KEY (`ESTADO_CUENTA`)
    REFERENCES `grupo25`.`ESTADO_CUENTA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CuentaInterna_CuentaBancaria1`
    FOREIGN KEY (`CUENTA_BANCARIA`)
    REFERENCES `grupo25`.`CUENTA_BANCARIA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CUENTA_INTERNA_MONEDA1`
    FOREIGN KEY (`MONEDA`)
    REFERENCES `grupo25`.`MONEDA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_CuentaBanco_Cliente1_idx` ON `grupo25`.`CUENTA_INTERNA` (`PROPIETARIO` ASC) VISIBLE;

CREATE INDEX `fk_CuentaBanco_EstadoCuenta1_idx` ON `grupo25`.`CUENTA_INTERNA` (`ESTADO_CUENTA` ASC) VISIBLE;

CREATE INDEX `fk_CuentaInterna_CuentaBancaria1_idx` ON `grupo25`.`CUENTA_INTERNA` (`CUENTA_BANCARIA` ASC) VISIBLE;

CREATE INDEX `fk_CUENTA_INTERNA_MONEDA1_idx` ON `grupo25`.`CUENTA_INTERNA` (`MONEDA` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`TRANSACCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`TRANSACCION` (
  `ID` INT NOT NULL,
  `FECHA_INSTRUCCION` DATETIME NULL,
  `FECHA_EJECUCION` DATETIME NULL,
  `CUENTA_ORIGEN` INT NOT NULL,
  `CUENTA_DESTINO` INT NOT NULL AUTO_INCREMENT,
  `CLIENTE` INT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_Transaccion_CuentaBancaria1`
    FOREIGN KEY (`CUENTA_ORIGEN`)
    REFERENCES `grupo25`.`CUENTA_BANCARIA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Transaccion_CuentaBancaria2`
    FOREIGN KEY (`CUENTA_DESTINO`)
    REFERENCES `grupo25`.`CUENTA_BANCARIA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TRANSACCION_CLIENTE1`
    FOREIGN KEY (`CLIENTE`)
    REFERENCES `grupo25`.`CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Transaccion_CuentaBancaria1_idx` ON `grupo25`.`TRANSACCION` (`CUENTA_ORIGEN` ASC) VISIBLE;

CREATE INDEX `fk_Transaccion_CuentaBancaria2_idx` ON `grupo25`.`TRANSACCION` (`CUENTA_DESTINO` ASC) VISIBLE;

CREATE INDEX `fk_TRANSACCION_CLIENTE1_idx` ON `grupo25`.`TRANSACCION` (`CLIENTE` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`CAMBIO_DIVISA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`CAMBIO_DIVISA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `TRANSACCION` INT NOT NULL,
  `MONEDA_COMPRA` INT NOT NULL,
  `MONEDA_VENTA` INT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_CambioDivisa_Transaccion1`
    FOREIGN KEY (`TRANSACCION`)
    REFERENCES `grupo25`.`TRANSACCION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CAMBIO_DIVISA_MONEDA1`
    FOREIGN KEY (`MONEDA_COMPRA`)
    REFERENCES `grupo25`.`MONEDA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CAMBIO_DIVISA_MONEDA2`
    FOREIGN KEY (`MONEDA_VENTA`)
    REFERENCES `grupo25`.`MONEDA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_CambioDivisa_Transaccion1_idx` ON `grupo25`.`CAMBIO_DIVISA` (`TRANSACCION` ASC) VISIBLE;

CREATE INDEX `fk_CAMBIO_DIVISA_MONEDA1_idx` ON `grupo25`.`CAMBIO_DIVISA` (`MONEDA_COMPRA` ASC) VISIBLE;

CREATE INDEX `fk_CAMBIO_DIVISA_MONEDA2_idx` ON `grupo25`.`CAMBIO_DIVISA` (`MONEDA_VENTA` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`PAGO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `TRANSACCION` INT NOT NULL,
  `CAMBIO_DIVISA` INT NULL,
  `MONEDA` VARCHAR(45) NOT NULL,
  `CANTIDAD` DOUBLE NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_Pago_Transaccion1`
    FOREIGN KEY (`TRANSACCION`)
    REFERENCES `grupo25`.`TRANSACCION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pago_CambioDivisa1`
    FOREIGN KEY (`CAMBIO_DIVISA`)
    REFERENCES `grupo25`.`CAMBIO_DIVISA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Pago_CambioDivisa1_idx` ON `grupo25`.`PAGO` (`CAMBIO_DIVISA` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`CHAT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`CHAT` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `EMPLEADO_ID` INT NOT NULL,
  `CLIENTE_ID` INT NOT NULL,
  `FECHA_CIERRE` DATETIME NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_CHAT_EMPLEADO1`
    FOREIGN KEY (`EMPLEADO_ID`)
    REFERENCES `grupo25`.`EMPLEADO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CHAT_CLIENTE1`
    FOREIGN KEY (`CLIENTE_ID`)
    REFERENCES `grupo25`.`CLIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_CHAT_EMPLEADO1_idx` ON `grupo25`.`CHAT` (`EMPLEADO_ID` ASC) VISIBLE;

CREATE INDEX `fk_CHAT_CLIENTE1_idx` ON `grupo25`.`CHAT` (`CLIENTE_ID` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`MENSAJE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`MENSAJE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `EMISOR` INT NOT NULL,
  `CHAT` INT NOT NULL,
  `TEXTO` TEXT NOT NULL,
  `FECHA` DATETIME NOT NULL,
  `LEIDO` TINYINT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_Mensaje_Persona1`
    FOREIGN KEY (`EMISOR`)
    REFERENCES `grupo25`.`PERSONA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Mensaje_Chat1`
    FOREIGN KEY (`CHAT`)
    REFERENCES `grupo25`.`CHAT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Mensaje_Persona1_idx` ON `grupo25`.`MENSAJE` (`EMISOR` ASC) VISIBLE;

CREATE INDEX `fk_Mensaje_Chat1_idx` ON `grupo25`.`MENSAJE` (`CHAT` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`ENTIDAD_BANCARIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`ENTIDAD_BANCARIA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `nombre_UNIQUE` ON `grupo25`.`ENTIDAD_BANCARIA` (`NOMBRE` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`CUENTA_EXTERNA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`CUENTA_EXTERNA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `CUENTA_BANCARIA` INT NOT NULL,
  `ENTIDAD_BANCARIA` INT NOT NULL,
  `SOSPECHOSA` TINYINT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_CuentaExtranjera_EntidadBancaria1`
    FOREIGN KEY (`ENTIDAD_BANCARIA`)
    REFERENCES `grupo25`.`ENTIDAD_BANCARIA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CuentaExterna_CuentaBancaria1`
    FOREIGN KEY (`CUENTA_BANCARIA`)
    REFERENCES `grupo25`.`CUENTA_BANCARIA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_CuentaExtranjera_EntidadBancaria1_idx` ON `grupo25`.`CUENTA_EXTERNA` (`ENTIDAD_BANCARIA` ASC) VISIBLE;

CREATE INDEX `fk_CuentaExterna_CuentaBancaria1_idx` ON `grupo25`.`CUENTA_EXTERNA` (`CUENTA_BANCARIA` ASC) VISIBLE;


-- -----------------------------------------------------
-- Table `grupo25`.`AUTORIZACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `grupo25`.`AUTORIZACION` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `EMPLEADO_ID` INT NOT NULL,
  `CUENTA_INTERNA_ID` INT NOT NULL,
  `FECHA` DATE NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_AUTORIZACION_EMPLEADO1`
    FOREIGN KEY (`EMPLEADO_ID`)
    REFERENCES `grupo25`.`EMPLEADO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AUTORIZACION_CUENTA_INTERNA1`
    FOREIGN KEY (`CUENTA_INTERNA_ID`)
    REFERENCES `grupo25`.`CUENTA_INTERNA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_AUTORIZACION_EMPLEADO1_idx` ON `grupo25`.`AUTORIZACION` (`EMPLEADO_ID` ASC) VISIBLE;

CREATE INDEX `fk_AUTORIZACION_CUENTA_INTERNA1_idx` ON `grupo25`.`AUTORIZACION` (`CUENTA_INTERNA_ID` ASC) VISIBLE;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

INSERT INTO ROL_CLIENTE(ROL) VALUES ('INDIVIDUAL'),('SOCIO'),('AUTORIZADO');
INSERT INTO ROL_EMPLEADO(ROL) VALUES ('GESTOR'),('ASISTENTE');
INSERT INTO ESTADO_CUENTA(ESTADO) VALUES ('ACTIVA'), ('BLOQUEADA'), ('SOLICITADO');
INSERT INTO ESTADO_CLIENTE(ESTADO) VALUES ('ACTIVO'), ('BLOQUEADO'), ('SOLICITADO');
INSERT INTO MONEDA(MONEDA, CAMBIO_EURO) VALUES ('EURO',1), ('DOLAR',0.91), ('LIBRA',1.1);
INSERT INTO USUARIO(USUARIO,PASSWORD,FECHA_REGISTRO) VALUES ('pepe','pepe',curdate()), ('jorge','jorge',curdate());
INSERT INTO PERSONA(DNI,NOMBRE,PRIMER_APELLIDO,FECHA_NACIMIENTO) VALUES ('12345678A','Pepe','Artacho',STR_TO_DATE('31-01-2002', '%d-%m-%Y')), ('12345678B','Jorge','Camacho',STR_TO_DATE('17-12-2002', '%d-%m-%Y'));
INSERT INTO DIRECCION(CALLE,NUMERO,CIUDAD,CODIGO_POSTAL,PAIS) VALUES ('CALLE',1,'MALAGA','12345','ESPANA');
INSERT INTO CLIENTE(ESTADO_CLIENTE,DIRECCION,FECHA_INICIO,USUARIO_ID,PERSONA_ID,ROL_CLIENTE_ID) VALUES (1,1,curdate(),1,1,1);
INSERT INTO EMPLEADO(USUARIO_ID,PERSONA_ID,ROL_EMPLEADO_ID) VALUES (2,2,2);